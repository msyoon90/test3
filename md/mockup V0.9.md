File: /md/mockup V0.9.md
markdown# 🎨 Smart MES-ERP 통합 시스템 Mockup V0.9

## 🚀 Version 0.9 업데이트 사항

✅ 회계관리 모듈 완성
✅ 구매관리 콜백 오류 수정 
✅ 데이터베이스 초기화 개선
🔧 영업관리 모듈 개발 준비

## 📊 현재 시스템 상태 (V0.9)

┌─────────────────────────────────────────────────────────────────┐
│                    🏭 Smart MES-ERP System V0.9                  │
│                         Progress Overview                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  구현 완료 모듈:                                                │
│  ├── ✅ MES (생산관리)          - 100% Complete               │
│  ├── ✅ 재고관리               - 100% Complete               │
│  ├── ✅ 구매관리               - 100% Complete (오류 수정됨)  │
│  ├── ✅ 회계관리               - 100% Complete (V0.7 추가)    │
│  │                                                             │
│  개발 예정 모듈:                                               │
│  ├── 🚧 영업관리               - 0% (V0.9 목표)              │
│  ├── 📅 품질관리               - 0% (V1.0 예정)              │
│  ├── 📅 인사관리               - 0% (V1.1 예정)              │
│  └── 📅 설비관리               - 0% (V1.2 예정)              │
└─────────────────────────────────────────────────────────────────┘

## 🆕 V0.9 회계관리 시스템 완성

### 1. 📊 회계 대시보드
┌─────────────────────────────────────────────────────────────────┐
│                    회계관리 메인 대시보드                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐         │
│  │오늘 전표  │ │승인 대기  │ │차대불일치│ │이번달    │         │
│  │   45건   │ │   12건   │ │   2건   │ │  320건  │         │
│  │  +5.3%   │ │    🔔    │ │   ⚠️    │ │ +12.5%  │         │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘         │
│                                                                 │
│  매출/매입 현황                                                 │
│  ├── 이번달 매출: ₩450,280,000 (전월 대비 +8.5%)             │
│  ├── 이번달 매입: ₩285,350,000 (전월 대비 +3.2%)             │
│  └── 매출총이익: ₩164,930,000 (이익률 36.6%)                 │
└─────────────────────────────────────────────────────────────────┘

### 2. 💰 재무제표 자동 생성
┌─────────────────────────────────────────────────────────────────┐
│                    손익계산서 (2025년 6월)                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Ⅰ. 매출액                           450,280,000              │
│  Ⅱ. 매출원가                         285,350,000              │
│  Ⅲ. 매출총이익                       164,930,000              │
│  Ⅳ. 판매관리비                        85,420,000              │
│      1. 인건비          45,000,000                             │
│      2. 임차료          12,000,000                             │
│      3. 감가상각비       8,420,000                             │
│      4. 기타           20,000,000                             │
│  Ⅴ. 영업이익                          79,510,000              │
│  Ⅵ. 영업외수익                         5,200,000              │
│  Ⅶ. 영업외비용                         3,150,000              │
│  Ⅷ. 법인세차감전순이익                 81,560,000              │
│  Ⅸ. 법인세비용                        17,943,200              │
│  Ⅹ. 당기순이익                        63,616,800              │
└─────────────────────────────────────────────────────────────────┘

### 3. 📈 예산 관리
┌─────────────────────────────────────────────────────────────────┐
│                    부서별 예산 집행 현황                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  생산부     ████████████████████░░░░░  82% (₩82M/₩100M)       │
│  영업부     ██████████████░░░░░░░░░░  65% (₩39M/₩60M)        │
│  관리부     ████████████████████████  95% (₩38M/₩40M) ⚠️     │
│  연구개발부  ███████████░░░░░░░░░░░░░  55% (₩44M/₩80M)        │
│                                                                 │
│  총 예산: ₩280,000,000 | 집행: ₩203,000,000 (72.5%)          │
└─────────────────────────────────────────────────────────────────┘

## 🔧 기술적 개선 사항

### 데이터베이스 구조 개선
✅ 회계 테이블 자동 생성 (init_database 함수)
✅ 외래키 제약 조건 강화
✅ 인덱스 최적화
✅ 트랜잭션 처리 개선

### 모듈 간 연계 강화
구매 → 회계: 발주 승인 시 자동 전표 생성
재고 → 회계: 입출고 시 원가 자동 반영
생산 → 회계: 제조원가 자동 계산

## 💡 V0.9 핵심 성과

✅ 완전한 회계 시스템 구축
✅ 재무제표 자동 생성
✅ 예산 통제 기능
✅ 원가 관리 체계
✅ 세무 신고 지원

## 🎯 V1.0 개발 계획 (영업관리)

주요 기능:
├── 견적서 관리
├── 수주 관리
├── 거래처(고객) 관리
├── 매출 분석
├── 영업 실적 관리
└── CRM 기능

## ⚠️ 필수 요구사항 (다음 대화용)

### 1. 현재 상태
- 구매관리 callbacks.py의 모든 콜백이 register_purchase_callbacks(app) 함수 안에 있어야 함
- 회계관리 모듈의 ID들이 'accounting-' 접두사 사용 (중복 방지)
- app.py의 init_database()에 회계 테이블 생성 코드 포함됨

### 2. 파일 구조
MES-ERPV0.8/
├── app.py (회계 테이블 포함)
├── modules/
│   ├── mes/
│   ├── inventory/
│   ├── purchase/ (콜백 수정됨)
│   └── accounting/ (신규)
├── scripts/
│   ├── create_accounting_tables.py
│   └── add_accounting_sample_data.py
└── data/
└── database.db

### 3. 다음 작업 시 주의사항
- 영업관리 모듈 추가 시 ID 중복 주의
- 모든 콜백은 register_XXX_callbacks(app) 함수 내부에
- 테이블 생성은 init_database()에 추가
- 모듈 간 연계 시 트랜잭션 처리 필수

### 4. 오류 해결 히스토리
```python
# 구매관리 콜백 오류 해결
# 문제: NameError: name 'app' is not defined
# 해결: 모든 @app.callback을 register_purchase_callbacks(app) 안으로 이동

# 회계관리 ID 중복 오류 해결  
# 문제: Duplicate callback outputs
# 해결: 회계 모듈 ID에 'accounting-' 접두사 추가

# 데이터베이스 오류 해결
# 문제: no such table: journal_header
# 해결: init_database()에 회계 테이블 추가
