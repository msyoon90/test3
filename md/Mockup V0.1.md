MES-ERP_Mockup V0.1.md
🎨 Smart MES-ERP 통합 시스템 Mockup
🏗️ 전체 시스템 아키텍처
┌─────────────────────────────────────────────────────────────────┐
│                    🏭 Smart MES-ERP System                      │
│                         v1.0 Architecture                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  👤 사용자 접속                                                 │
│       ↓                                                         │
│  ┌─────────┐     NO    ┌─────────────┐                        │
│  │로그인필요├──────────→│ 메인 대시보드 │                        │
│  └────┬────┘           └──────┬──────┘                        │
│       │YES                    │                                │
│       ↓                       ↓                                │
│  ┌─────────┐            ┌─────────────────────────────┐       │
│  │ 로그인  │            │    📊 모듈 시스템          │       │
│  └────┬────┘            ├─────────────────────────────┤       │
│       │                 │ • MES (생산관리) ✅        │       │
│       └────────────────→│ • 재고관리 ⭕             │       │
│                         │ • 구매관리 ⭕             │       │
│                         │ • 영업관리 ⭕             │       │
│                         └───────┬─────────────────────┘       │
│                                 │                              │
│                    ┌────────────┴────────────┐                 │
│                    ↓                         ↓                 │
│         ┌──────────────────┐      ┌──────────────────┐       │
│         │ 📁 SQLite DB     │      │ ⚙️ 설정 관리     │       │
│         │ • 작업 데이터    │      │ • UI 커스터마이징│       │
│         │ • 사용자 정보    │      │ • 모듈 ON/OFF   │       │
│         │ • 시스템 설정    │      │ • 실시간 반영   │       │
│         └──────────────────┘      └──────────────────┘       │
│                                                                 │
│  🔄 실시간 업데이트 (2초)    🐛 디버깅 콘솔 (F12)             │
└─────────────────────────────────────────────────────────────────┘
📱 반응형 디자인 구조
┌─────────────────────────────────────────────────────────────────┐
│                    디바이스별 레이아웃                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  💻 Desktop (1920px)          📱 Tablet (768px)                │
│  ┌────┬────────────┐         ┌─────────────┐                 │
│  │메뉴│   콘텐츠   │         │ ≡ 메뉴     │                 │
│  │    │            │         ├─────────────┤                 │
│  │    │            │         │             │                 │
│  │    │            │         │   콘텐츠    │                 │
│  │    │            │         │             │                 │
│  └────┴────────────┘         └─────────────┘                 │
│                                                                 │
│  📱 Mobile (375px)                                             │
│  ┌─────────────┐                                              │
│  │ ≡ │ 제목   │                                              │
│  ├─────────────┤                                              │
│  │             │                                              │
│  │   콘텐츠    │                                              │
│  │   (세로)    │                                              │
│  │             │                                              │
│  └─────────────┘                                              │
└─────────────────────────────────────────────────────────────────┘
🔐 인증 시스템 플로우
┌─────────────────────────────────────────────────────────────────┐
│                      인증 프로세스 플로우                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  config.yaml                                                    │
│  ┌─────────────────┐                                          │
│  │ authentication: │                                          │
│  │   enabled: true │ ←─── UI 설정에서 ON/OFF 가능            │
│  └────────┬────────┘                                          │
│           │                                                     │
│           ↓ true                        ↓ false               │
│  ┌─────────────────┐           ┌─────────────────┐           │
│  │  🔐 로그인 화면  │           │ 🏠 메인 대시보드 │           │
│  │                 │           │   (바로 접속)    │           │
│  │ ID: [_______]   │           └─────────────────┘           │
│  │ PW: [_______]   │                                          │
│  │                 │                                          │
│  │ [로그인] [게스트]│                                          │
│  └────────┬────────┘                                          │
│           │                                                     │
│           ↓ 성공                                              │
│  ┌─────────────────┐                                          │
│  │ 세션 생성       │                                          │
│  │ • 사용자 정보   │                                          │
│  │ • 권한 레벨     │                                          │
│  │ • 타임아웃 설정 │                                          │
│  └─────────────────┘                                          │
└─────────────────────────────────────────────────────────────────┘
🏭 MES 모듈 상세 구조
┌─────────────────────────────────────────────────────────────────┐
│                    MES 모듈 전체 구조도                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  📊 MES 메인                                                    │
│     │                                                           │
│     ├── 📝 작업 입력                                           │
│     │    ├── 기본 정보 입력                                    │
│     │    ├── 생산 실적 입력                                    │
│     │    ├── 불량 정보 입력                                    │
│     │    └── 데이터 검증 → 저장                               │
│     │                                                           │
│     ├── 📊 현황 조회                                           │
│     │    ├── 실시간 대시보드                                   │
│     │    ├── LOT별 추적                                        │
│     │    ├── 작업자별 실적                                     │
│     │    └── 공정별 현황                                       │
│     │                                                           │
│     ├── 📈 분석                                                │
│     │    ├── 생산성 분석                                       │
│     │    ├── 불량률 분석                                       │
│     │    ├── 시간대별 분석                                     │
│     │    └── 리포트 생성                                       │
│     │                                                           │
│     └── ⚙️ 설정                                                │
│          ├── 입력 폼 커스터마이징                              │
│          ├── 검증 규칙 설정                                    │
│          ├── 알림 설정                                         │
│          └── 권한 관리                                         │
└─────────────────────────────────────────────────────────────────┘
🎨 UI 커스터마이징 시스템
┌─────────────────────────────────────────────────────────────────┐
│              폼 빌더 - 드래그 앤 드롭 인터페이스                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  🎨 폼 디자이너                          👁️ 실시간 미리보기    │
│  ┌─────────────────────┐              ┌───────────────────┐   │
│  │ 📦 필드 도구상자     │              │ 작업 입력 폼      │   │
│  │ ┌─────────────┐    │              │ ┌───────────────┐ │   │
│  │ │ 텍스트 입력 │ 🔄 │ ──drag──→    │ │ LOT: [_____] │ │   │
│  │ └─────────────┘    │              │ └───────────────┘ │   │
│  │ ┌─────────────┐    │              │ ┌───────────────┐ │   │
│  │ │ 숫자 입력   │    │              │ │ 수량: [_____] │ │   │
│  │ └─────────────┘    │              │ └───────────────┘ │   │
│  │ ┌─────────────┐    │              │                   │   │
│  │ │ 날짜 선택   │    │              │ 속성 패널 ↓      │   │
│  │ └─────────────┘    │              └───────────────────┘   │
│  └─────────────────────┘                                       │
│                                                                 │
│  ⚙️ 필드 속성                                                   │
│  ┌─────────────────────────────────────────────────────┐      │
│  │ 필드명: [LOT 번호________]                          │      │
│  │ 필수여부: ✅            검증: [정규식 ▼]           │      │
│  │ 기본값: [LOT-2024-___]  조건: [항상 표시 ▼]       │      │
│  └─────────────────────────────────────────────────────┘      │
└─────────────────────────────────────────────────────────────────┘
🔄 실시간 업데이트 메커니즘
┌─────────────────────────────────────────────────────────────────┐
│                   실시간 데이터 플로우                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Frontend (Dash)                    Backend (Python)            │
│  ┌─────────────┐                   ┌─────────────┐            │
│  │ 대시보드    │ ←──── 2초마다 ────│ 데이터 조회 │            │
│  │ Component   │      WebSocket     │   Service   │            │
│  └─────────────┘                   └──────┬──────┘            │
│        ↑                                   │                    │
│        │                                   ↓                    │
│  ┌─────────────┐                   ┌─────────────┐            │
│  │ 📊 차트     │                   │ 📁 SQLite   │            │
│  │ 자동 업데이트│ ←─────────────────│   Database  │            │
│  └─────────────┘   실시간 데이터    └─────────────┘            │
│                                                                 │
│  업데이트 항목:                                                 │
│  • 생산량 카운터                                               │
│  • 가동률 게이지                                               │
│  • 작업자 상태                                                 │
│  • 알림 메시지                                                 │
└─────────────────────────────────────────────────────────────────┘
🐛 디버깅 시스템 구조
┌─────────────────────────────────────────────────────────────────┐
│                    통합 디버깅 시스템                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  에러 발생 시나리오:                                            │
│                                                                 │
│  modules/mes/callbacks.py                                       │
│  ┌─────────────────────────────────────────────────────┐      │
│  │ def save_work_data():                                │      │
│  │     try:                                             │      │
│  │         db.insert(data)  ← 에러 발생!               │      │
│  │     except Exception as e:                           │      │
│  │         logger.error(f"저장 실패: {e}")             │      │
│  └─────────────────────────────────────────────────────┘      │
│                    ↓                                            │
│  디버깅 콘솔 자동 표시:                                         │
│  ┌─────────────────────────────────────────────────────┐      │
│  │ 🔴 ERROR | 14:23:45 | mes.callbacks:45             │      │
│  │ ├─ 모듈: MES > 작업 입력                           │      │
│  │ ├─ 함수: save_work_data()                          │      │
│  │ ├─ 에러: Database locked                           │      │
│  │ ├─ 원인: 동시 접속 초과                            │      │
│  │ └─ 해결: [🔧 자동 복구] [📋 상세 로그]            │      │
│  └─────────────────────────────────────────────────────┘      │
└─────────────────────────────────────────────────────────────────┘
📊 데이터베이스 구조
┌─────────────────────────────────────────────────────────────────┐
│                    SQLite 데이터베이스 구조                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  📁 database.db                                                 │
│  │                                                              │
│  ├── 📋 users (사용자)                                         │
│  │   ├── id (PK)                                              │
│  │   ├── username                                             │
│  │   ├── password (암호화)                                    │
│  │   └── role (admin/user)                                    │
│  │                                                              │
│  ├── 📋 work_logs (작업 기록)                                  │
│  │   ├── id (PK)                                              │
│  │   ├── lot_number                                           │
│  │   ├── work_date                                            │
│  │   ├── process                                              │
│  │   ├── worker_id (FK)                                       │
│  │   ├── plan_qty                                             │
│  │   ├── prod_qty                                             │
│  │   ├── defect_qty                                           │
│  │   └── created_at                                           │
│  │                                                              │
│  ├── 📋 system_config (시스템 설정)                            │
│  │   ├── key                                                  │
│  │   ├── value (JSON)                                         │
│  │   └── updated_at                                           │
│  │                                                              │
│  └── 📋 form_templates (폼 템플릿)                             │
│      ├── id (PK)                                              │
│      ├── name                                                 │
│      ├── config (JSON)                                        │
│      └── is_active                                            │
└─────────────────────────────────────────────────────────────────┘
🚀 시스템 시작 프로세스
┌─────────────────────────────────────────────────────────────────┐
│                     시스템 부팅 시퀀스                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  python app.py 실행                                             │
│       │                                                         │
│       ├── 1️⃣ 설정 파일 로드 (config.yaml)                     │
│       │                                                         │
│       ├── 2️⃣ 데이터베이스 연결 확인                           │
│       │    └── 없으면 자동 생성                               │
│       │                                                         │
│       ├── 3️⃣ 활성 모듈 로드                                   │
│       │    ├── ✅ MES 모듈                                   │
│       │    ├── ⭕ 재고 모듈 (비활성)                         │
│       │    └── ...                                            │
│       │                                                         │
│       ├── 4️⃣ 인증 시스템 초기화                               │
│       │    └── config에 따라 ON/OFF                           │
│       │                                                         │
│       ├── 5️⃣ 실시간 업데이트 시작                             │
│       │                                                         │
│       └── 6️⃣ 웹 서버 시작                                     │
│            └── http://localhost:8050                          │
│                                                                 │
│  🎉 시스템 준비 완료!                                           │
└─────────────────────────────────────────────────────────────────┘
💡 핵심 특징 요약
┌─────────────────────────────────────────────────────────────────┐
│                      시스템 핵심 특징                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1️⃣ 모듈식 아키텍처                                            │
│     • 독립적 모듈 ON/OFF                                       │
│     • ERP로 확장 가능                                          │
│                                                                 │
│  2️⃣ 완전한 UI 커스터마이징                                     │
│     • 코드 수정 없이 폼 변경                                   │
│     • 드래그 앤 드롭 인터페이스                               │
│                                                                 │
│  3️⃣ 실시간 업데이트                                            │
│     • 2초마다 자동 갱신                                        │
│     • WebSocket 기반                                          │
│                                                                 │
│  4️⃣ 통합 디버깅 시스템                                         │
│     • 에러 위치 즉시 파악                                      │
│     • 자동 해결 방안 제시                                      │
│                                                                 │
│  5️⃣ 반응형 디자인                                              │
│     • PC/태블릿/모바일 자동 최적화                            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
